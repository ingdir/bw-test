define(["require","external/jspath"],function(e){function n(e,t,n){return function(){return e=-e,e<0?t:n}}function r(e,n){if(n.length===0)return!0;var r=0;$(window).off("resize.bwTagCloud").on("resize.bwTagCloud",function(){clearTimeout(r),r=setTimeout(function(){i(e,n)},150)}),e.off("click.bwTagCloud").on("click.bwTagCloud",".b-cloud__word",function(){var r=t("^ {.id === $id}",n,{id:this.getAttribute("data-id")});if(!r||!r[0])return!0;e.trigger("cloud:displayWordStats",{label:r[0].label,positive:r[0].sentiment.positive||0,negative:r[0].sentiment.negative||0,neutral:r[0].sentiment.neutral||0})}),i(e,n)}function i(e,t){e.addClass("b-cloud").empty().find(".b-stats").addClass("b-stats_empty");var r=e.outerWidth(),i=n(1,"appendTo","prependTo"),s=function(){return $("<div></div>").data("add",n(1,"appendTo","prependTo")).addClass("b-cloud__row")[i()](e)},o=function(e){return $("<div></div>").addClass("b-cloud__word "+(e.modifier!==""?"b-cloud__word_"+e.modifier:"")).text(e.label).attr({title:e.popularity,"data-id":e.id}).css({fontSize:100+60*e.fontWeight+"%"})},u=function(e,t){var n=e.clone(!0);n[t.data("add")()](t),t.data("add")();var i=t.outerWidth();return n.remove(),i<=r},a=s(),f=a;t.forEach(function(e){var t=o(e);u(t,a)||!u(t,a)&&a.find(".b-cloud__word").length>0&&(f=a,a=s()),t[a.data("add")()](a),t.data("outerWidth",t.outerWidth())})}var t=e("external/jspath");return{init:r}});